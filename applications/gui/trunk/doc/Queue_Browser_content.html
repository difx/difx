<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
    <title>Queue Browser</title>
    <link type="text/css" rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>Queue Browser</h1>
    The Queue Browser displays information about DiFX jobs - jobs that
    are processed by DiFX and jobs that the GUI user has specific
    interest in.&nbsp; Controls can be launched from job listed in the
    Queue Browser to start and stop DiFX processing of them, edit their
    properties, monitor their progress, or simply learn detailed
    information about them.&nbsp; In addition new jobs can be created
    using the Queue Browser.<br>
    <h4>Adding a Job to the Queue Browser</h4>
    There are a number of ways to add a job to the Queue Browser.&nbsp;
    At a very basic level, the only thing required to add a job is the
    location of a DiFX <tt>.input</tt> file.&nbsp; The GUI uses the
    full path of the <tt>.input</tt> file to uniquely identify a job
    (since it is, unlike the job "name", guaranteed to be unique), and
    the contents of the <tt>.input</tt> file to fully describe the
    job.&nbsp; The Queue Browser provides the following ways to obtain
    and <tt>.input</tt> file, and thus create a job:<br>
    <h5>&nbsp;&nbsp;&nbsp; Create A Job From Scratch</h5>
    A completely new job or list of jobs can be added to the queue based
    on a .vex file and a few user settings.&nbsp; This process is
    described in BLAT.<br>
    <h5>&nbsp;&nbsp;&nbsp; Obtain a Job From the Database</h5>
    <p>If you are using the DiFX data base structure (see <a
        href="database.html">DiFX GUI and the Database</a>), previously
      stored jobs can be downloaded based on their names, properties, or
      completion state.<br>
    </p>
    <h5>&nbsp;&nbsp;&nbsp; Locate an .input File on a Remote or Local
      Host</h5>
    <p>This facility allows any previously created job to be brought
      into the GUI as long as its original working directory and
      associated files are intact.&nbsp; The <tt>.input</tt> file (if
      properly formatted) will fully describe the job and where it and
      all necessary components to run and monitor it are located.&nbsp;
      <br>
    </p>
    <h5>&nbsp;&nbsp;&nbsp; Monitor a Job Running Elsewhere<br>
    </h5>
    All jobs that are running (i.e. being processed by DiFX) while the
    GUI is active produce multicast diagnostic messages detailing their
    progress.&nbsp; The GUI (assuming it is set correctly to monitor
    multicast traffic) will collect, interpret, and display the content
    of these messages in the Queue Browser.&nbsp; If the job generating
    the messages is known (already listed in the Queue Browser), their
    content will adjust the appropriate job entry in the Queue Browser
    display.&nbsp; If the job is <i>not</i> known a new entry will be
    created.&nbsp; New entries of this sort will lack complete detail
    because their associated <tt>.input</tt> file will not be known
    (its identity is not contained in the multicast messages).&nbsp;
    Also the GUI will only be able to monitor these jobs, not stop or
    start them (this makes some sense - any job listed this way was
    started elsewhere, so presumably belongs to someone else).&nbsp;
    Jobs of this type appear under the heading "Jobs Not In Queue"
    (maybe that will be changed...).<br>
    <br>
    <br>
    <br>
    The DiFX GUI Queue Browser organizes DiFX activities in a hierarchy
    of "experiments", "passes", and "jobs", a structure that is mirrored
    in the DiFX database.&nbsp; At the highest level the Queue Browser
    contains a list of experiments, each of which can contain any number
    of passes, within which are a number of jobs. &nbsp; From the bottom
    up, each job exists in one and only one pass, and each pass exists
    in one and only one experiment.&nbsp; The browser provides tools to
    allow you to create, delete, edit, and move experiments, passes and
    jobs, and these changes are reflected in the database as well as on
    your DiFX host where correlations are actually run.<br>
    <span style="font-weight: bold;"></span>
    <h6><br>
    </h6>
    <h6>Experiments</h6>
    An "experiment" is based on a single set of observations as
    contained in a single <span style="font-family: Courier
      New,Courier,monospace;">.vex</span> file.&nbsp; It has a set of
    defined data sources (modules, files, or active e-transfers), and a
    working directory location associated with it where all associated
    files and sub-directories reside.&nbsp; It contains one or more
    passes.<br>
    <h6><br>
    </h6>
    <h6>Passes</h6>
    A "pass" contains a subset of the "scans" or "jobs" in an
    experiment, along with a <span style="font-family: Courier
      New,Courier,monospace;">.v2d</span> file containing the parameters
    that make the pass unique within the experiment.&nbsp; The <span
      style="font-family: Courier New,Courier,monospace;">.v2d</span>
    file is created by the GUI based on the settings in a series of menu
    options and fields.&nbsp; &nbsp; Each pass has a sub-directory
    associated with it under the directory of its parent experiment
    containing the <span style="font-family: Courier
      New,Courier,monospace;">.v2d</span> file, the <span
      style="font-family: Courier New,Courier,monospace;">.input</span>
    files associated with each job in the pass, and any results
    generated.<br>
    <h6><br>
    </h6>
    <h6>Jobs</h6>
    Each job can be used to run a single DiFX correlation process.&nbsp;
    A job has an <span style="font-family: Courier
      New,Courier,monospace;">.input</span> file associated with it,
    contained in the sub-directory of its parent pass.&nbsp; All of the
    jobs in a pass are generated from the <span style="font-family:
      Courier New,Courier,monospace;">.v2d</span> and <span
      style="font-family: Courier New,Courier,monospace;">.vex</span>
    files using <span style="font-style: italic;">vex2difx</span>,
    which produces the <span style="font-family: Courier
      New,Courier,monospace;">.input</span> files.&nbsp; Jobs can be run
    individually, or in groups, either in the working directory
    structure or in a separate "staging area" (see "Queuing Jobs"
    below).<br>
    <h4> Simplifying Your DiFX Work<br>
    </h4>
    In the event you are uninterested in the experiment/pass/job
    hierarchy and really just want to correlate something, the Queue
    Browser is designed to offer you short cuts so you interaction with
    it is minimal.&nbsp; You can, if you wish, completely ignore the
    database, as the GUI and DiFX will run fine without using it - it
    doesn't even have to exist on your software correlator (see <a
      href="settings.html#Database_Configuration">Database Configuration</a>
    in the Settings documentation for information about turning on/off
    database use and other associated settings).<br>
    <h4> "Queuing" Jobs</h4>
    <p>For many DiFX users, the operations whereby experiments, passes,
      and jobs are created and specified are separate from those where
      they are processed and run using DiFX (they are often done by
      different people - "analysts" specify jobs, "operators" run
      them).&nbsp; The DiFX GUI can accommodate such a division of labor
      using the "queuing" process.&nbsp; Individual jobs, passes, or
      entire experiments can be "queued" after they are created.&nbsp;
      When this is done, copies of all files required to run the job(s)
      are made in a specified "staging area" where they can then be run
      without disturbing the working directories.&nbsp; Results can then
      be obtained from the staging area when the jobs are run.&nbsp;
      Note that this process is voluntary - you can ignore it if you
      don't want to bother with it!&nbsp; The GUI will let you run DiFX
      from your working directories as well - queuing your work is not
      required.<br>
    </p>
    <h4>Creating a New Experiment</h4>
    <p>To create a new experiment, the GUI needs to assist the user in
      doing a number of things:<br>
    </p>
    <ol>
      <li>Uniquely identify the experiment (i.e. name it)</li>
      <li>Track down and associate a <span style="font-family: Courier
          New,Courier,monospace;">.vex</span> file with the experiment</li>
      <li>Determine what date sources are needed for the experiment</li>
      <li>Define a "working directory" for the experiment on the DiFX
        host</li>
      <li>Decide whether to put the experiment in the database</li>
    </ol>
    The "New Experiment" panel provides controls for accomplishing all
    of this.&nbsp; To generate it, click the "New..." menu on the Queue
    Browser and choose "Experiment".&nbsp; Included on the panel are:<br>
    <ul>
    </ul>
    <ul>
      <li><span style="font-weight: bold;">Name</span> is a text string
        (up to 20 characters) that appears in the Queue Browser list of<span
          style="font-family: Verdana;"> </span>experiments - it is
        essentially the "face" of the new experiment.&nbsp; The GUI will
        attempt to create a default name that is unique, but this should
        probably be replaced with something more descriptive or
        otherwise friendlier.</li>
      <li><span style="font-weight: bold;">Number</span> is something
        I'm not sure about right now.&nbsp; It is contained in the
        database, so that's why its in the GUI.&nbsp; It can be an
        integer between 0 and 9999.&nbsp; By default it is 0.</li>
      <li><span style="font-weight: bold;">Status</span> describes the
        current state of the experiment.&nbsp; If the database is being
        used the GUI will provide a pull-down list of status types that
        the database is aware of.&nbsp; In the absence of the database
        the status is left blank, or "unknown", although eventually I
        hope to allow users to define their own status types.<br>
      </li>
      <li><span style="font-weight: bold;">In Database</span> is a check
        box indicating whether or not this experiment is to be contained
        in the DiFX database on the database server.&nbsp; You may not
        have a DiFX database or you may not be using it, in which case
        this item will not be checked when the panel is created.&nbsp;
        If you think you <span style="font-style: italic;">are</span>
        using the database and the item is not checked the GUI was
        unable to communicate with the database server, which might
        indicate your database connection parameters are bad (these
        parameters are set in the Settings Window - see <a
          href="settings.html#Database_Configuration">Database
          Configuration</a>).</li>
      <li><span style="font-weight: bold;">Database ID</span> is a
        unique number assigned to each experiment by the DiFX data base
        server software.&nbsp; If <span style="font-weight: bold;">In
          Database</span> is checked, this field will initially be blank
        (as the database has yet to assign a number).&nbsp; If <span
          style="font-weight: bold;">In Database</span> is <span
          style="font-style: italic;">not</span> checked, the GUI will
        attempt to assign a unique ID on its own (if you ultimately move
        the experiment to the database this ID will change to what the
        database assigns - probably a different value).</li>
      <li><span style="font-weight: bold;">Created</span> displays the
        creation data and time for the experiment.&nbsp; Until the
        experiment is entered in the database this will display the data
        and time that the "New Experiment" window was opened on the GUI
        (according to the system clock).&nbsp; When/if the experiment is
        entered into the database this value will become the date and
        time that this event occurred (according to the clock of the
        DiFX database host system).</li>
      <li><span style="font-weight: bold;">Working Directory</span>
        shows the directory in which this experiment and its
        sub-directories will reside on the DiFX host.&nbsp; The GUI will
        try to produce a sensible default for this field based on the
        "Working Directory Root" in the Systems Settings (see BLAT) and
        the name assigned to the experiment (until this field is changed
        deliberately by the user, it will adjust itself automatically to
        reflect any changes in the Name field when "return" is hit in
        the Name field).&nbsp; When the "Apply" button is pushed the
        directory will be created on the DiFX host if it doesn't already
        exist (note that the "DiFX user" on the DiFX host must have
        permission to create this directory!).&nbsp;</li>
    </ul>
    <h6>Viewing and Editing Experiment Parameters</h6>
    <p>The parameters associated with an experiment can be examined and
      changed by right-clicking on the experiment name in the Queue
      Browser to bring up the Experiment Menu, and then picking
      "Parameters".&nbsp; This will produce a pop-up panel very similar
      to the "New Experiment" panel, but with all parameters
      un-editable.&nbsp; Clicking on the "Edit" button in this panel
      will permit changes.<br>
    </p>
    <p>Not all items may be edited.&nbsp; For instance, the working
      directory can not be altered after it is originally created.&nbsp;
      Oh yeah?&nbsp; Why not?&nbsp; How do we handle a "copy"
      then?&nbsp; How about that???&nbsp; Eh?<br>
    </p>
    <h6>What the GUI Is Doing<br>
    </h6>
    <h4> Creating a New Pass<br>
    </h4>
    Defining a new experiment will automatically create a default
    "Production" pass.&nbsp; This pass will allow the user to quickly
    adjust any parameters stored in the <span style="font-family:
      Courier New,Courier,monospace;">.v2d</span> file and generate a
    list of jobs via <span style="font-style: italic;">vex2difx</span>.&nbsp;












































    <br>
    <h4>Creating Jobs</h4>
    <h4><a name="LOCATE_ON_DISK"></a>Locating Experiments on Disk</h4>
    <p>The Queue Browser has the ability to locate previously-created
      experiments on disk (via the head node) and adding them to the
      queue.&nbsp; It does this by locating <tt>.input</tt> files, one
      of which should exist for each existing job on disk.&nbsp;
      Assuming an <tt>.input</tt> file is intact and properly formatted
      the GUI can extract all information about its associated job, edit
      that information, and run the job.&nbsp; <br>
    </p>
    <p>The Queue Browser panel provides a tool for locating <tt>.input</tt>
      files on disk using the "Locate on Disk..." option under the
      "Experiments" menu:<br>
    </p>
    <p align="center">IMAGE OF MENU HERE<br>
    </p>
    <p>The "Experiment Location" tool provides a field for defining the
      directory path of .input files (the field accepts standard "ls"
      wildcard rules).&nbsp; Each .input file is assumed to represent a
      job.&nbsp; Options are provided for defining the names of
      experiments and passes associated with the found jobs.&nbsp; A
      preview of all jobs that meet the defined criteria is given -
      hitting "Apply" will put these jobs in the Queue Browser
      experiment queue.&nbsp; A detailed description of each
      field/option/button is below:<br>
    </p>
    <blockquote>
      <h6>Locate .input Files Matching...</h6>
      <h6>Experiment Name(s)</h6>
      <blockquote>
        <h6>Based on Path</h6>
        <h6>Specified Name</h6>
      </blockquote>
      <h6>Pass Name(s):</h6>
      <blockquote>
        <h6>Based on Path</h6>
        <h6>None</h6>
        <h6>Specified Name</h6>
      </blockquote>
    </blockquote>
    <blockquote>
      <h6>Preview<br>
      </h6>
    </blockquote>
    <blockquote>
      <h6>Auto Update</h6>
      <p>This option will trigger a periodic search of the disk for new
        jobs using the rules specified in the window.&nbsp; Any changes
        to the list of experiments and jobs that meet the search
        criteria will be reflected in the Queue Browser - jobs that are
        deleted will be removed, new jobs that are created will appear,
        etc.&nbsp; <i>This is only necessary if you want to see changes
          made by other people (i.e. other instances of the GUI) in real
          time </i>- the Queue Browser will show any changes you make
        without this option being chosen.&nbsp; Unless you expect remote
        changes to be made and wish to see them you should probably not
        pick this option as the searches are resource-consuming.</p>
      <h6>Apply<br>
      </h6>
    </blockquote>
    <p></p>
  </body>
</html>
